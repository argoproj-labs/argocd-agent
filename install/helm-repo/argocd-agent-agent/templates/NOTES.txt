Thank you for installing {{ include "argocd-agent-agent.name" . }}!

Your agent has been deployed to the {{ include  "argocd-agent-agent.namespace" . }} namespace.

Release: {{ .Release.Name }}
Namespace: {{ include  "argocd-agent-agent.namespace" . }}

Deployment
----------
- Name: argocd-agent-agent
- Replicas: {{ .Values.replicaCount }}
- Image: {{ .Values.image }}:{{ .Values.imageTag }} (pullPolicy: {{ .Values.imagePullPolicy }})

Services
--------
- Metrics Service:  argocd-agent-agent-metrics
  - Port/TargetPort: {{ .Values.service.metrics.port }} / {{ .Values.service.metrics.targetPort }}
- Healthz Service:  argocd-agent-agent-healthz
  - Port/TargetPort: {{ .Values.service.healthz.port }} / {{ .Values.service.healthz.targetPort }}

Quick checks
------------
1) Check Deployment rollout
   kubectl -n {{ include  "argocd-agent-agent.namespace" . }} rollout status deploy/argocd-agent-agent

2) List Services
   kubectl -n {{ include  "argocd-agent-agent.namespace" . }} get svc argocd-agent-agent-metrics argocd-agent-agent-healthz

3) Port-forward to Metrics and Healthz
   # Metrics
   kubectl -n {{ include  "argocd-agent-agent.namespace" . }} port-forward deploy/argocd-agent-agent 127.0.0.1:{{ .Values.service.metrics.port }}:{{ .Values.service.metrics.targetPort }}
   # Healthz
   kubectl -n {{ include  "argocd-agent-agent.namespace" . }} port-forward deploy/argocd-agent-agent 127.0.0.1:{{ .Values.service.healthz.port }}:{{ .Values.service.healthz.targetPort }}

4) Probe endpoints
   curl -sf http://127.0.0.1:{{ .Values.service.healthz.port }}/healthz || true
   curl -sf http://127.0.0.1:{{ .Values.service.metrics.port }}/metrics | head -n 20 || true

Configuration overview
----------------------
- Agent mode: {{ .Values.agentMode }}
- Remote server: {{ .Values.server }}:{{ .Values.serverPort }}
- Redis address: {{ .Values.redisAddress }}
